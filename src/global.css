@import 'tailwindcss';

@theme {
    --breakpoint-*: initial;
    --breakpoint-2xs: 375px;
    --breakpoint-xs: 475px;
    --breakpoint-sm: 640px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 1024px;
    --breakpoint-xl: 1280px;
    --breakpoint-2xl: 1536px;

    --color-ming: #256d7a;
    --color-moss: #5ac75f;
    --color-honeydew: #d6ead7;
    --color-evergreen: #152816;
    --color-carbon-black: #0e1b0f;
}

@plugin '@tailwindcss/typography';

@custom-variant dark (&:where(.dark, .dark *));

@layer utilities {
    .prose code:not(pre > code) {
        /* night-owl */
        /* background: #011627;
        color: var(--color-white); */

        /* one-dark-pro */
        background: #282c34;
        color: var(--color-gray-200);

        display: inline-block;
        padding: 2px 4px;
        border-radius: 4px;
        margin-right: 1px;
        line-height: 1.4em;
        word-break: break-word;
        /* white-space: nowrap; */
        font-weight: 500;
        font-size: 0.8em;

        &::before,
        &::after {
            content: '';
        }
    }

    .prose pre {
        line-height: 1.5;
    }

    .prose blockquote {
        /* Disable adding quote marks to block-quotes: https://github.com/tailwindlabs/tailwindcss-typography/issues/66 */
        p {
            &:first-of-type::before,
            &:last-of-type::after {
                content: none;
            }
        }
    }
}

@utility link {
    color: black;
    line-height: 1;
    padding: 0.5rem;
    background: linear-gradient(
        to bottom,
        var(--color-moss) 0%,
        var(--color-moss) 100%
    );
    background-position: 0 100%;
    background-repeat: repeat-x;
    background-size: 2px 2px;
    transition:
        background-size 0.15s var(--ease-out),
        color 0.3s var(--ease-out);
    text-decoration: none;

    .prose & {
        color: black;
        line-height: 1;
        padding: 0.5rem;
        background: linear-gradient(
            to bottom,
            var(--color-moss) 0%,
            var(--color-moss) 100%
        );
        background-position: 0 100%;
        background-repeat: repeat-x;
        background-size: 2px 2px;
        transition:
            background-size 0.15s var(--ease-out),
            color 0.3s var(--ease-out);
        text-decoration: none;
    }

    .prose h2 code,
    .prose h3 code,
    .prose h4 code {
        color: white;
    }

    &:hover {
        background-size: 2px 100%;
    }

    .prose &:hover {
        background-size: 2px 100%;
    }

    @media (hover: none) {
        &:hover {
            background-size: 2px 2px;
        }

        .prose &:hover {
            background-size: 2px 2px;
        }

        &:active {
            background-size: 2px 100%;
            transition: none;
        }

        .prose &:active {
            background-size: 2px 100%;
            transition: none;
        }
    }

    .prose & {
        padding: 0.1rem;
    }

    &.compact {
        padding: 0.1rem;
    }
}

.dark .link,
.dark .prose .link {
    color: white;

    /* Invert colors of SVG icons displayed as images */
    img {
        transition: all 0.3s var(--ease-out);
        filter: invert(100%);
    }

    &:hover {
        color: black;

        img {
            filter: unset;
        }
    }
}

.prose a {
    @apply link;
}

@utility compact {
    & .link {
        padding: 0.1rem;
    }
}

html {
    overflow-y: scroll;
    scrollbar-gutter: stable both-edges;
    color-scheme: dark light;
}

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        transition-duration: 0.01ms !important;
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        animation-delay: 0.01ms !important;
    }
}
