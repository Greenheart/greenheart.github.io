import"./DsnmJJEf.js";import"./pltd8r3C.js";import{f as C,a as e,s as a,c as p,A as l,B as d,r as t}from"./Ch4VLgmR.js";import{L as A}from"./BLMvKsEz.js";import{C as r}from"./CVvY9x6P.js";const x="automatic-internal-external-links-in-sveltekit",h={title:"Automatic Internal and External Links in SvelteKit",date:"2021-07-31",tags:["TypeScript","Svelte","SvelteKit","Code Snippet"]},{title:g,date:b,tags:w}=h,L=[{level:2,title:"Finished SvelteKit ",id:"finished-sveltekit"},{level:2,title:"Some Thoughts About This Implementation",id:"some-thoughts-about-this-implementation"}];var E=C("<article><p><strong>Update 2023-03-23:</strong> This method is heavily outdated. See <!> for modern options.</p><p>Markdown content on blogs often require you to support both internal and external links at the same time. Usually, you need to separate behaviors for the different kinds of links, like for example prefetching internal links to improve page load times on your blog, while simultaneously opening external links in separate tabs without prefetching but instead with other attributes like <code>rel=&quot;noopener noreferrer&quot;</code>.</p><p>Fortunately, Svelte and SvelteKit provides a good solution to this problem.</p><p>First, we need to test if a given URL is external. This can be solved with a helper function like this:</p><!><p>Then you can use <code>isExternalURL()</code> to create a Svelte <code>&lt;Link /&gt;</code> component that automatically handles the right attributes for both internal and external links. And with SvelteKit's <code>sveltekit:prefetch</code> directive, your users will get a really smooth experience browsing your website, without compromising on how you handle external links.</p><h2>Finished SvelteKit <code>&lt;Link /&gt;</code> Component</h2><!><h2>Some Thoughts About This Implementation</h2><ol><li>It uses two separate script contexts: One with <code>module</code> in order to only import external dependencies and create functions once during the runtime, and the other one for the component context which handles component instances and re-renders.</li><li><code>$$props.class</code> is an unfortunate workaround to support external classes passed down via the regular class attribute, since <code>class</code> is a reserved keyword in JavaScript. Let me know if you have a better solution for this!</li></ol></article>");function T(c){var s=E(),n=p(s),i=a(p(n),2);A(i,{href:"https://kit.svelte.dev/docs/link-options",children:(B,f)=>{l();var F=d("https://kit.svelte.dev/docs/link-options");e(B,F)},$$slots:{default:!0}}),l(),t(n);var o=a(n,4);r(o,{codeHTML:`<pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> * Test if an URL is external.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> * </span><span style="color:#C678DD;font-style:italic">@param</span><span style="color:#E06C75;font-style:italic"> href</span><span style="color:#7F848E;font-style:italic"> {string} The URL to test.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> * </span><span style="color:#C678DD;font-style:italic">@returns</span><span style="color:#7F848E;font-style:italic"> True if the link is external, and false otherwise.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> isExternalURL</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">href</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">boolean</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> a</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">createElement</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'a'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B">    a</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">href</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> href</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> window</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">location</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">host</span><span style="color:#56B6C2"> !==</span><span style="color:#E5C07B"> a</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">host</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>`});var y=a(o,3);r(y,{codeHTML:`<pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">&#x3C;!-- Link.svelte --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">script</span><span style="color:#D19A66"> lang</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"ts"</span><span style="color:#D19A66"> module</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#C678DD">    import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">onMount</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> 'svelte'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">     * Test if an URL is external.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">     * </span><span style="color:#C678DD;font-style:italic">@param</span><span style="color:#E06C75;font-style:italic"> href</span><span style="color:#7F848E;font-style:italic"> {string} The URL to test.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">     * </span><span style="color:#C678DD;font-style:italic">@returns</span><span style="color:#7F848E;font-style:italic"> True if the link is external, and false otherwise.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD">    function</span><span style="color:#61AFEF"> isExternalURL</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">href</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">string</span><span style="color:#ABB2BF">): </span><span style="color:#E5C07B">boolean</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">        const</span><span style="color:#E5C07B"> a</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">createElement</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'a'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B">        a</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">href</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> href</span></span>
<span class="line"><span style="color:#C678DD">        return</span><span style="color:#E5C07B"> window</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">location</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">host</span><span style="color:#56B6C2"> !==</span><span style="color:#E5C07B"> a</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">host</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">script</span><span style="color:#D19A66"> lang</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"ts"</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#C678DD">    export</span><span style="color:#C678DD"> let</span><span style="color:#E06C75"> href</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> ''</span></span>
<span class="line"><span style="color:#C678DD">    let</span><span style="color:#E06C75"> additionalProps</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">object</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> classes</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> [$$</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">class</span><span style="color:#56B6C2"> ??</span><span style="color:#98C379"> ''</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">'default'</span><span style="color:#ABB2BF">].</span><span style="color:#61AFEF">join</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">' '</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">trim</span><span style="color:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">    onMount</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">isExternalURL</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">href</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#E06C75">            additionalProps</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">                rel</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'noopener noreferrer'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">                target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'_blank'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF">        } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">            additionalProps</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#98C379">                'sveltekit:prefetch'</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF">    })</span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> {</span><span style="color:#E06C75">href</span><span style="color:#D19A66">}</span><span style="color:#D19A66"> class</span><span style="color:#ABB2BF">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">classes</span><span style="color:#C678DD">}</span><span style="color:#D19A66"> {</span><span style="color:#ABB2BF">...</span><span style="color:#E06C75">$$props</span><span style="color:#D19A66">}</span><span style="color:#D19A66"> {</span><span style="color:#ABB2BF">...</span><span style="color:#E06C75">additionalProps</span><span style="color:#D19A66">}</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">    &#x3C;</span><span style="color:#C678DD">slot</span><span style="color:#ABB2BF"> /></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">></span></span>
<span class="line"></span></code></pre>`}),l(2),t(s),e(c,s)}export{T as default,h as frontmatter,L as headings,x as slug};
