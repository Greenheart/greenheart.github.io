import{a as x,t as j}from"./disclose-version.D5g0bMZL.js";import"./legacy.CjxW4MSY.js";import{s as e,f as T,c as a,r as s,n as S}from"./runtime.D9GYYi2j.js";import{h as t}from"./html.Bz0YsFcd.js";import{l as $,s as N}from"./props.DQfrSCu4.js";import{B as I}from"./BlogLayoutWrapper.Dw_fYpOP.js";const q={title:"Run TypeScript Directly with Node.js 22",date:"2024-12-29T00:00:00.000Z",tags:["TypeScript","Node.js"],featured:!0};var E=j('<p><strong>It’s about to get much easier to run TypeScript directly with Node.js.</strong> As of Node.js <code>22.7.0</code>, there are two experimental command line flags to strip TypeScript types and convert TypeScript-only syntax into JavaScript that can be excuted by Node.js.</p> <p>This even works with import aliases if you make some config and code changes, as demonstrated later. But let’s start with the basics first:</p> <h2>How to run TypeScript directly with Node.js:</h2> <pre class="language-sh"><!></pre> <p>If your code (or any dependencies) use TypeScript-only features like <code>enum</code> and <code>namespace</code>, you need to use the following command:</p> <pre class="language-sh"><!></pre> <p>If you start many <code>node</code>-processes and want to filter out the <code>ExperimentalWarning</code>s from the log output, you can pass the flag <code>--no-warnings=ExperimentalWarning</code> to get a much cleaner output:</p> <pre class="language-sh"><!></pre> <p>Reading the <a href="https://nodejs.org/en/learn/typescript/run-natively" rel="nofollow">official guide</a>, I’m especially excited that this brings us a step closer to full TypeScript-support without any external tools or command line flags.</p> <blockquote><p>Future versions of Node.js will include support for TypeScript without the need for a command line flag.</p></blockquote> <h2>How to run TypeScript code with import aliases</h2> <p>One limitation as of Node.js is that import aliases defined via <code>tsconfig.json</code> and the <code>paths</code> option (<a href="https://www.typescriptlang.org/docs/handbook/modules/reference.html#paths" rel="nofollow">docs</a>) don’t work.</p> <p>However, there is a workaround availalble by adding Node.js <a href="https://nodejs.org/api/packages.html#subpath-patterns" rel="nofollow">subpath patterns</a>, defined in the <code>imports</code> field of <code>package.json</code> to achieve the same effect. Let’s look at an example:</p> <h3>1. Update configuration</h3> <p>If you have a <code>tsconfig.json</code> defining an <code>@app</code> import alias like this:</p> <pre class="language-json"><!></pre> <p>Then you can add the following import alias in <code>package.json</code> to make it work almost the same way (more on that in a moment):</p> <pre class="language-json"><!></pre> <p><strong>NOTE:</strong> Import aliases within your own module/code base need to start with the <code>#</code> character. If you know a way to make this work with a custom character like <code>@</code> or <code>$</code>, please <a href="https://fosstodon.org/@Greenheart" rel="nofollow">let me know</a>!</p> <h3>2. Update code import statements</h3> <p>To make your code run again, you need to update the imports in your code with a global find all <code>@app</code> and replace with <code>#app</code>.</p> <p>For example, all your imports like this:</p> <pre class="language-ts"><!></pre> <p>Need to be updated into:</p> <pre class="language-ts"><!></pre> <p>Also note that Node.js requires explicit file extensions when using import aliases. Perhaps it’s possible to use without <code>.ts</code> extensions, but at the same time, I think it’s good to be explicit - especially since most of the imports are added automatically by the code editor.</p> <h2>Run TypeScript in production</h2> <p>Since this is an experimental feature, it’s currently recommended to transpile TypeScript using <code>tsc</code> when building for production. To easily run TypeScript without a separate transpilation step, <code>tsx</code> (<a href="https://github.com/privatenumber/tsx/" rel="nofollow">learn more</a>) is still a great choice.</p> <p>However, for development and quick scripts, this is a big boost to productivity!</p>',1);function L(u,h){const m=$(h,["children","$$slots","$$events","$$legacy"]);I(u,N(()=>m,q,{children:(g,H)=>{var l=E(),o=e(T(l),6),f=a(o);t(f,()=>'<code class="language-sh"><span class="token function">node</span> --experimental-strip-types main.ts</code>'),s(o);var n=e(o,4),k=a(n);t(k,()=>'<code class="language-sh"><span class="token function">node</span> --experimental-strip-types --experimental-transform-types main.ts</code>'),s(n);var p=e(n,4),y=a(p);t(y,()=>'<code class="language-sh"><span class="token function">node</span> --no-warnings<span class="token operator">=</span>ExperimentalWarning --experimental-strip-types --experimental-transform-types main.ts</code>'),s(p);var r=e(p,16),w=a(r);t(w,()=>`<code class="language-json"><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">&#123;</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"@app/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./src/*"</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code>`),s(r);var i=e(r,4),v=a(i);t(v,()=>`<code class="language-json"><span class="token comment">// package.json</span>
<span class="token punctuation">&#123;</span>
    <span class="token property">"imports"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"#app/*"</span><span class="token operator">:</span> <span class="token string">"./src/*"</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code>`),s(i);var c=e(i,10),b=a(c);t(b,()=>`<code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> something <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@app/lib/something'</span></code>`),s(c);var d=e(c,4),_=a(d);t(_,()=>`<code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> something <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'#app/lib/something.ts'</span></code>`),s(d),S(8),x(g,l)},$$slots:{default:!0}}))}export{L as default,q as metadata};
