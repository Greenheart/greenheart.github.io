import{s as k,a as p,q as n,c as x,r as y,H as g,g as $,R as b,v as j,b as P,d as q,e as C,p as w}from"./DFoSfPlL.js";import{ae as E,af as _,ag as f,ah as h,g as l}from"./s0BQWua7.js";async function H(a){const e=await fetch(a,{headers:{"x-sveltekit-pathname":location.pathname,"x-sveltekit-search":location.search}});if(!e.ok)throw new g(500,"Failed to execute remote function");const t=await e.json();if(t.type==="redirect")throw await $(t.location),new b(307,t.location);if(t.type==="error")throw new g(t.status??500,t.error);return t.result}function M(a,e){return t=>{const c=k(t,p.hooks.transport),r=x(a,c);let s=n.get(r),u=!0;try{E(()=>(s&&s.count++,()=>{const d=n.get(r);d&&(d.count--,_().then(()=>{!d.count&&d===n.get(r)&&(n.delete(r),delete y[r])}))}))}catch{u=!1}let o=s?.resource;return o||(o=e(r,c),Object.defineProperty(o,"_key",{value:r}),n.set(r,s={count:u?1:0,resource:o}),o.then(()=>{_().then(()=>{!s.count&&s===n.get(r)&&n.delete(r)})}).catch(()=>{n.delete(r)})),o}}const m=`sveltekit:${j}`;let i;const O=(async()=>{if(typeof caches<"u")try{i=await caches.open(m);const a=await caches.keys();for(const e of a)e.startsWith("sveltekit:")&&e!==m&&await caches.delete(e)}catch(a){console.warn("Failed to initialize SvelteKit cache:",a)}})();class R{#e;#t=f(!0);#r=f(!1);#a=f();#s=f(void 0);constructor(e){this.#e=e().then(t=>(h(this.#t,!1),h(this.#r,!0),h(this.#a,t),t),t=>{throw h(this.#t,!1),h(this.#s,t),t})}then(e,t){return this.#e.then(e,t)}catch(e){return this.#e.catch(e)}finally(e){return this.#e.finally(e)}get current(){return l(this.#a)}get error(){return l(this.#s)}get loading(){return l(this.#t)}get ready(){return l(this.#r)}}function v(a,e){return i.put(a,new Response(e,{headers:{"Content-Type":"application/json"}})).catch(()=>{})}function A(a){return M(a,(e,t)=>new R(async()=>{await O;const c=`${q}/${C}/remote/${a}${t?`/${t}`:""}`;if(Object.hasOwn(y,e)){const s=y[e];return i&&v(c,P(s,p.encoders)),s}if(i)try{const s=await i.match(c);if(s){const u=await s.text();return w(u,p.decoders)}}catch{}const r=await H(c);return i&&v(c,r),w(r,p.decoders)}))}const K=A("1v1xrys/getPostMetadata");export{K as g};
