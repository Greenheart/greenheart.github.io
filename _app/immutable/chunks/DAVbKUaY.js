import{f as m,a as p,t as o}from"./DIoeuq72.js";import"./B6S2i44Y.js";import{s as n,c as r,n as l,r as c}from"./s0BQWua7.js";import{L as t}from"./D4KHlrG_.js";import{C as g}from"./sY1TkON4.js";const L="_testing-rust-cli-apps",v={title:"Testing Rust-based CLI applications using temporary directories",publishedAt:"2026-01-17",tags:["Rust","Terminal","Open Source"]},{title:R,publishedAt:I,tags:P}=v;var $=m("<article><p>Update: As a result of writing this post, I also <!> a more in-depth example back to the Rust CLI book.</p><p>While the Rust CLI book covers the <!>, it doesn't show the full capabilities of the crates <!>, <!> and <!>.</p><p>Once you get used to reading Rust docs like <!>, you can find almost everything that you need. However, using my fresh perspective on the Rust ecosystem, I think this is a good opportunity to make it even easier to get started writing Rust-based CLI apps.</p><!></article>");function T(f){var B=$(),i=r(B),u=n(r(i));t(u,{href:"https://github.com/rust-cli/book/pull/284",children:(s,e)=>{l();var a=o("contributed");p(s,a)},$$slots:{default:!0}}),l(),c(i);var y=n(i),d=n(r(y));t(d,{href:"https://rust-cli.github.io/book/tutorial/testing.html",children:(s,e)=>{l();var a=o("basics of testing CLI apps");p(s,a)},$$slots:{default:!0}});var A=n(d,2);t(A,{href:"https://crates.io/crates/assert_cmd",children:(s,e)=>{l();var a=o("assert_cmd");p(s,a)},$$slots:{default:!0}});var h=n(A,2);t(h,{href:"https://crates.io/crates/assert_fs",children:(s,e)=>{l();var a=o("assert_fs");p(s,a)},$$slots:{default:!0}});var C=n(h,2);t(C,{href:"https://crates.io/crates/predicates",children:(s,e)=>{l();var a=o("predicates");p(s,a)},$$slots:{default:!0}}),l(),c(y);var F=n(y),_=n(r(F));t(_,{href:"https://docs.rs/assert_fs/latest/assert_fs/",children:(s,e)=>{l();var a=o("docs.rs/assert_fs");p(s,a)},$$slots:{default:!0}}),l(),c(F);var E=n(F);g(E,{codeHTML:`<pre class="shiki one-dark-pro" style="background-color:#282c34;color:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">#[test]</span></span>
<span class="line"><span style="color:#C678DD">fn</span><span style="color:#61AFEF"> find_content_in_file_of_tmp_dir</span><span style="color:#ABB2BF">() -> </span><span style="color:#E5C07B">Result</span><span style="color:#ABB2BF">&#x3C;(), </span><span style="color:#E5C07B">Box</span><span style="color:#ABB2BF">&#x3C;</span><span style="color:#C678DD">dyn</span><span style="color:#E06C75"> std</span><span style="color:#ABB2BF">::</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">Error</span><span style="color:#ABB2BF">>> {</span></span>
<span class="line"><span style="color:#C678DD">    let</span><span style="color:#E06C75"> cwd</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> assert_fs</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">TempDir</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">new</span><span style="color:#ABB2BF">()?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    let</span><span style="color:#E06C75"> child_dir</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> cwd</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">child</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"nested/child_dir"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD">    let</span><span style="color:#E06C75"> child_file</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> child_dir</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">child</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"sample.txt"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75">    child_file</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">write_str</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"The first</span><span style="color:#56B6C2">\\n</span><span style="color:#98C379">test file.</span><span style="color:#56B6C2">\\n</span><span style="color:#98C379">Last line of first file."</span><span style="color:#ABB2BF">)?;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Files can be nested several levels within the temporary directory</span></span>
<span class="line"><span style="color:#61AFEF">    assert!</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">child_file</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">path</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">ends_with</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"nested/child_dir/sample.txt"</span><span style="color:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">    cargo_bin_cmd!</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"grrs"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">        // Execute in the temporary directory</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">current_dir</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">cwd</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">path</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">arg</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"first"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">arg</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">child_file</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">path</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">assert</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">success</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">        .</span><span style="color:#61AFEF">stdout</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">predicate</span><span style="color:#ABB2BF">::</span><span style="color:#E5C07B">str</span><span style="color:#ABB2BF">::</span><span style="color:#61AFEF">contains</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#98C379">            "The first</span><span style="color:#56B6C2">\\n</span><span style="color:#98C379">Last line of first file."</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">        ));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B">    Ok</span><span style="color:#ABB2BF">(())</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>`}),c(B),p(f,B)}export{T as default,v as frontmatter,L as slug};
